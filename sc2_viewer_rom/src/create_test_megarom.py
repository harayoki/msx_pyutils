import sys

if len(sys.argv) < 2:
    print("set out.rom"); sys.exit(1)

out = sys.argv[1]
rom = bytearray(0x10000)

boot = [
    0x41,0x42,0x10,0x40,0,0,0,0,0,0,0,0,0,0,0,0,
    0xF3,0x31,0x80,0xF3,

    0x3E,2,0xCD,0x5F,0x00,  # SCREEN2

    0x3E,1,
    0x32,0,0x70,

    0x3A,0,0x80, # A=(8000h)
    0x3D,  # a--
    0x20, 6,  # NZ jump
    0xF3,  # DI
    0x3E, 8, 0xCD, 0x5F, 0x00,  # SCREEN8

    # 0xF3,  # DI
    # 0x3E, 8, 0xCD, 0x5F, 0x00,  # SCREEN8
    # 0xCD,0x78,0x00,   # CALL 0078h（SCREEN8）

    # 0x18, #LOOP
    # 0xFE,

    0xc9
]

rom[0x4000:0x4000+len(boot)] = boot
rom[0x8000] = 1

with open(out,"wb") as f:
    f.write(rom)
    # ASCII16SRAM2
print(out)
