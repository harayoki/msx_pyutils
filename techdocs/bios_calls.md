# MSX BIOSコール簡易表

| # | 大項目 | 名称 | 簡易説明 | 入力レジスタ | 出力レジスタ | 変更レジスタ | 詳細 |
| --- | --- | --- | --- | --- | --- | --- | --- |
| 1 | RST/基本 | CHKRAM (#0000) | RAM構成検査とシステムRAM決定 | なし | なし | 全て | RST 0。ソフトリセットとしても使われる。 |
| 2 | RST/基本 | SYNCHR (#0008) | 次の1バイトと(HL)を比較 | HL:比較文字の番地 | 一致時CHRGTRへ進む | AF,HL | RST 8。直後のDEFB値と(HL)が違えばSyntax Error。 |
| 3 | RST/基本 | CHRGTR (#0010) | BASICテキストから1文字取得 | HL:文字位置 | A:取得文字, HL:次位置 | AF,HL | 数字ならCY=1、行末ならZF=1で返る。 |
| 4 | RST/基本 | OUTDO (#0018) | 現在の出力先へ1バイト送信 | A:出力データ | なし | なし | PRTFLG/PTRFILの状態で画面・プリンタ・ファイルに振り分け。 |
| 5 | RST/基本 | DCOMPR (#0020) | HLとDEを比較 | HL,DE:比較値 | フラグに結果 | AF | HL=DEでZF、HL<DEでCYをセット。 |
| 6 | RST/基本 | GETYPR (#0028) | VALTYPの型をフラグで返す | なし | フラグで型返却 | AF | 整数/文字列/単精度/倍精度をフラグ組み合わせで判別。 |
| 7 | RST/基本 | CALLF (#0030) | インライン指定スロットへジャンプ | 後続:スロット番号, 呼び先 | なし | AFほか | RST30H。DEFBスロット＋DEFW番地を続けて書き、他スロットのルーチンを呼ぶ。 |
|   |   |   |   |   |   |   |   |
| 1 | スロット/システム | CALSLT (#001C) | 指定スロットのROMルーチン呼び出し | IX:ジャンプ先、IY:ワーク、A:スロットID | なし | AF,IX,IY | IYはジャンプ先ルーチンの環境保持にも使うので事前設定が必要。 |
| 2 | スロット/システム | ENASLT (#0024) | スロット選択してページに反映 | A:スロットID, HL:ページ先頭 | なし | AF | BIOS, BASIC, RAMのページ切替に利用。 |
| 3 | スロット/システム | RDSLT (#000C) | スロット内の1バイト読込 | A:スロットID, HL:アドレス | A:読込データ | AF | スロット越しのROM参照に使う。WRSLT(#0014)と対で覚えると便利。 |
| 4 | スロット/システム | WRSLT (#0014) | スロット内へ1バイト書込 | A:スロットID, HL:アドレス, E:書込データ | なし | AF | RAMがあるスロットへの間接書き込み用。 |
|   |   |   |   |   |   |   |   |
| 1 | 画面/VDP | DISSCR (#0041) | 画面非表示 | なし | なし | AF,BC | VDPレジスタ1のbit6を落とすだけなので処理が速い。 |
| 2 | 画面/VDP | ENASCR (#0044) | 画面表示 | なし | なし | AF,BC | DISSCRの逆。VDP設定変更後の表示再開に。 |
| 3 | 画面/VDP | WRTVDP (#0047) | VDPレジスタ設定 | B:データ, C:レジスタ番号 | なし | AF,BC | レジスタ番号は0–27。MSX2以降はSUB-ROM経由。 |
| 4 | 画面/VDP | RDVRM (#004A) | VRAMから1バイト読出し | HL:VRAMアドレス(下位14bit有効) | A:読み値 | AF | 16bitアドレス時はNRDVRM(0174H)を使用。 |
| 5 | 画面/VDP | WRTVRM (#004D) | VRAMへ1バイト書込 | HL:VRAMアドレス(下位14bit有効), A:データ | なし | AF | 16bitアドレス時はNWRVRM(0177H)を使用。 |
| 6 | 画面/VDP | SETRD (#0050) | VRAMオートインクリメント読込設定 | HL:VRAM開始(下位14bit有効) | なし | AF | 以後ポート0読み出しで連続参照。16bitはNSETRD(016E)。 |
| 7 | 画面/VDP | SETWRT (#0053) | VRAMオートインクリメント書込設定 | HL:VRAM開始(下位14bit有効) | なし | AF | 以後ポート0書き込みで連続転送。16bitはNSTWRT(0171)。 |
| 8 | 画面/VDP | FILVRM (#0056) | VRAM領域を同一値で埋める | HL:VRAM先頭(下位14bit有効), BC:バイト数, A:埋め値 | なし | AF,BC | 16bit開始番地はBIGFIL(016B)を利用。 |
| 9 | 画面/VDP | LDIRMV (#0059) | VRAM→メモリの連続読出し | HL:VRAM先頭, DE:書込先アドレス, BC:バイト数 | なし | 全て | HL/DEは16bit有効。インタースロット経由は不安定。 |
| 10 | 画面/VDP | LDIRVM (#005C) | メモリ→VRAMの連続書込 | HL:元アドレス, DE:VRAM先頭, BC:バイト数 | なし | 全て | まとめ描画の高速転送。 |
| 11 | 画面/VDP | CHGMOD (#005F) | 画面モード変更 | A:モード番号 | なし | 全て | パレットは初期化しない。SUB-ROMを内部呼び出し。 |
| 12 | 画面/VDP | CHGCLR (#0062) | 画面色設定 | なし | なし | 全て | FORCLR(F3E9H)/BAKCLR(F3EAH)/BDRCLR(F3EBH)を事前設定して呼ぶ。|
| 13 | 画面/VDP | NMI (#0066) | NMI処理呼び出し | なし | なし | 全て | 一時的なNMI処理呼び出し用。 |
| 14 | 画面/VDP | CLS (#00C3) | 画面クリア | なし | なし | AF,BC,DE | SUB-ROM経由で画面とカーソル状態を初期化。 |
|   |   |   |   |   |   |   |   |
| 1 | 画面初期化 | CLRSPR (#0069) | スプライトテーブル消去 | なし | なし | 全て | SCRMODに応じてY座標が初期化される。 |
| 2 | 画面初期化 | INITXT (#006C) | SCREEN 0 初期化 | なし | なし | 全て | テキスト40桁モードに整える。パレット初期化なし。 |
| 3 | 画面初期化 | INIT32 (#006F) | SCREEN 1 初期化 | なし | なし | 全て | テキスト32桁モード設定。パレット初期化なし。 |
| 4 | 画面初期化 | INIGRP (#0072) | SCREEN 2 初期化 | なし | なし | 全て | グラフィックモードのVRAM初期化。パレット初期化なし。 |
| 5 | 画面初期化 | INIMLT (#0075) | SCREEN 3 初期化 | なし | なし | 全て | マルチカラーモード初期化。パレット初期化なし。 |
| 6 | 画面初期化 | SETTXT (#0078) | VDPをSCREEN 0へ切替 | なし | なし | 全て | VDP側のみモード変更。 |
| 7 | 画面初期化 | SETT32 (#007B) | VDPをSCREEN 1へ切替 | なし | なし | 全て | 画面内容は維持しモードだけ変える。 |
| 8 | 画面初期化 | SETGRP (#007E) | VDPをSCREEN 2へ切替 | なし | なし | 全て | SCREEN1後に呼ぶとSCREEN1.5。 |
| 9 | 画面初期化 | SETMLT (#0081) | VDPをSCREEN 3へ切替 | なし | なし | 全て | VDPだけモード変更する。 |
| 10 | 画面初期化 | TOTEXT (#00D2) | テキスト画面へ戻す | なし | なし | 全て | グラフィックからテキストへ一括復帰。 |
|   |   |   |   |   |   |   |   |
| 1 | スプライト/グラフィック | CALPAT (#0084) | スプライトパターン先頭取得 | A:スプライト番号 | HL:VRAMアドレス | AF,DE,HL | スプライトジェネレータテーブルの位置を返す。 |
| 2 | スプライト/グラフィック | CALATR (#0087) | スプライト属性先頭取得 | A:スプライト番号 | HL:VRAMアドレス | AF,DE,HL | 属性テーブルの該当位置を返す。 |
| 3 | スプライト/グラフィック | GSPSIZ (#008A) | スプライトサイズ取得 | なし | A:サイズ | AF | 16×16ならCYフラグがセットされる。 |
| 4 | スプライト/グラフィック | GRPPRT (#008D) | グラフィック画面へ文字出力 | A:キャラクタコード | なし | AF | SCREEN5以降はLOGOPRで論理演算指定可。 |
|   |   |   |   |   |   |   |   |
| 1 | サウンド/PSG | GICINI (#0090) | PSG初期化 | なし | なし | 全て | 3chとも停止し音量0にする。 |
| 2 | サウンド/PSG | WRTPSG (#0093) | PSGレジスタ設定 | A:レジスタ番号, E:データ | なし | 全て | SOUND文と同等のレジスタ書き込み。 |
| 3 | サウンド/PSG | RDPSG (#0096) | PSGレジスタ読出し | A:レジスタ番号 | A:読み値 | AF | レジスタの現在値を参照する。 |
| 4 | サウンド/PSG | STRTMS (#0099) | PLAY未実行時にPLAY開始 | なし | なし | 全て | MSX-MUSIC/TURBO-R向けミュージックドライバ起動。 |
| 5 | サウンド/PSG | CHGSND (#0132) | キークリック音設定 | A:0=OFF,1=ON | なし | AF | キーボードのクリック音を切り替える。 |
| 6 | サウンド/PSG | BEEP (#00C0) | ビープ音 | なし | なし | 全て | 内部でSUB-ROMを呼び出す短音。 |
|   |   |   |   |   |   |   |   |
| 1 | 割り込み/システム | KEYINT (#0038) | タイマ割り込みサービス | なし | なし | 全て | キーボード/タイマ割り込みの共通入口。HOOK用にも利用。 |
| 2 | 割り込み/システム | RSLREG (#0138) | プライマリスロットレジスタ読出し | なし | A:スロットレジスタ値 | AF | スロット展開状態を把握する時に使う。 |
| 3 | 割り込み/システム | WSLREG (#013B) | プライマリスロットレジスタ設定 | A:新しいスロットレジスタ値 | なし | AF | スロット切替の低レベル操作。CALSLT前に現在スロットを保存しておくと安全。 |
| 4 | 割り込み/システム | RDVDP (#013E) | VDPステータスレジスタ読出し | B:ステータス番号 | A:読み値 | AF | ステータスレジスタの内容を直接取得する。 |
|   |   |   |   |   |   |   |   |
| 1 | 入力デバイス | GTSTCK (#00D5) | ジョイスティック方向取得 | A:ポート番号(0=カーソル,1=Joy1,2=Joy2) | A:方向(0=なし,1=上〜8=左上) | 全て | 斜め入力も番号で返す。カーソルキーも0指定で読める。 |
| 2 | 入力デバイス | GTTRIG (#00D8) | トリガーボタン取得 | A:ポート番号(0=SPACE,1=Joy1,2=Joy2) | A:FFH=押下,00H=非押下 | 全て | BASICのSTRIG相当。 |
| 3 | 入力デバイス | GTPAD (#00DB) | 入出力装置状態取得 | A:装置ID | A:状態/座標 | 全て | タブレット/マウス/ライトペン等の状態をまとめて返す。 |
| 4 | 入力デバイス | GTPDL (#00DE) | パドル状態取得 | A:パドル番号 | A:値 | 全て | 実機パドル未普及で互換環境では無効の場合あり。 |
| 5 | 入力デバイス | SNSMAT (#0141) | キーボードマトリクス取得 | A:行番号(0–7) | A:ビット反転値 | AF | 各ビット0で押下。直接キーを監視したいときに使う。 |
|   |   |   |   |   |   |   |   |
| 1 | 文字入出力 | CHSNS (#009C) | キーボード入力有無確認 | なし | ZF=1なら未入力 | AF | BIOSキーボードバッファを参照。 |
| 2 | 文字入出力 | CHGET (#009F) | 1文字入力(待ち) | なし | A:文字コード | AF | CTRL-STOPなどの制御キーもそのまま取得。 |
| 3 | 文字入出力 | CHPUT (#00A2) | 1文字出力 | A:文字コード | なし | AF | 現在の出力先(画面/プリンタ/COM)に従う。 |
| 4 | 文字入出力 | PINLIN (#00AE) | 行入力してバッファへ格納 | HL:バッファ先頭-1 | なし | 全て | STOPでCY=1。基本の行入力ルーチン。 |
| 5 | 文字入出力 | INLIN (#00B1) | AUTFLGをセットしてPINLIN | HL:バッファ先頭-1 | なし | 全て | 自動入力フラグを立てて行入力する。 |
| 6 | 文字入出力 | QINLIN (#00B4) | "? "表示後にPINLIN | HL:バッファ先頭-1 | なし | 全て | BASIC INPUTと同じプロンプト付き行入力。 |
| 7 | 文字入出力 | BREAKX (#00B7) | CTRL+STOP確認 | なし | CY=1なら押下中 | AF | 割り込みを禁止したまま戻る。 |
| 8 | 文字入出力 | KILBUF (#0156) | キーボードバッファ消去 | なし | なし | AF | 入力待ち前にバッファを空にして誤入力を防ぐ。 |
